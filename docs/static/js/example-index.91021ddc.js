(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"./example/index.css":function(e,t,n){},"./example/index.mdx":function(e,t,n){"use strict";n.r(t);var a=n("./node_modules/_@babel_runtime@7.7.7@@babel/runtime/helpers/esm/objectWithoutProperties.js"),r=n("react"),c=n.n(r),o=n("./node_modules/_@mdx-js_react@1.5.3@@mdx-js/react/dist/esm.js"),s=n("./node_modules/_@babel_runtime@7.7.7@@babel/runtime/helpers/esm/slicedToArray.js"),l=n("./node_modules/_antd@3.26.6@antd/es/card/index.js"),i=n("./node_modules/_antd@3.26.6@antd/es/button/index.js"),u=n("./node_modules/_antd@3.26.6@antd/es/input/index.js"),d=c.a.createContext(null);function m(){var e=Object(r.useContext)(d);if(!e)throw new Error("could not find react-redux context value; please ensure the component is wrapped in a <Provider>");return e}"undefined"!==typeof d&&d&&d===Object(d)&&Object.isExtensible(d)&&Object.defineProperty(d,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Context",filename:"src/Context.ts"}}),m&&m===Object(m)&&Object.isExtensible(m)&&Object.defineProperty(m,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useReduxContext",filename:"src/Context.ts"}});var b=function(e){var t=e.store,n=e.children;return c.a.createElement(d.Provider,{value:{store:t}},n)};function p(){return m().store.dispatch}b&&b===Object(b)&&Object.isExtensible(b)&&Object.defineProperty(b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Provider",filename:"src/Provider.tsx"}}),p&&p===Object(p)&&Object.isExtensible(p)&&Object.defineProperty(p,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useDispatch",filename:"src/useDispatch.ts"}});var f=function(e,t){return e===t};function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,n=m(),a=n.store,c=Object(r.useReducer)((function(e){return e+1}),0),o=Object(s.a)(c,2),l=o[1],i=Object(r.useRef)(),u=e(a.getState());function d(){var n=e(a.getState());t(n,i.current)||(i.current=n,l())}return Object(r.useEffect)((function(){i.current=u})),Object(r.useEffect)((function(){return a.subscribe(d)}),[]),u}j&&j===Object(j)&&Object.isExtensible(j)&&Object.defineProperty(j,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useSelector",filename:"src/useSelector.ts"}}),p&&p===Object(p)&&Object.isExtensible(p)&&Object.defineProperty(p,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useDispatch",filename:"src/index.tsx"}}),j&&j===Object(j)&&Object.isExtensible(j)&&Object.defineProperty(j,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useSelector",filename:"src/index.tsx"}}),b&&b===Object(b)&&Object.isExtensible(b)&&Object.defineProperty(b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Provider",filename:"src/index.tsx"}});var v=n("./node_modules/_@babel_runtime@7.7.7@@babel/runtime/helpers/esm/toConsumableArray.js"),O=n("./node_modules/_@babel_runtime@7.7.7@@babel/runtime/helpers/esm/objectSpread2.js"),g=n("./node_modules/_redux@4.0.5@redux/es/redux.js"),y={count:0,message:"Hello",logs:[]};"undefined"!==typeof ActionType&&ActionType&&ActionType===Object(ActionType)&&Object.isExtensible(ActionType)&&Object.defineProperty(ActionType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ActionType",filename:"example/store.ts"}}),"undefined"!==typeof State&&State&&State===Object(State)&&Object.isExtensible(State)&&Object.defineProperty(State,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"State",filename:"example/store.ts"}});var h=Object(g.a)((function(e,t){switch(t.type){case"add":return Object(O.a)({},e,{count:e.count+1});case"chat":return Object(O.a)({},e,{message:t.payload});case"log":return Object(O.a)({},e,{logs:[t.payload].concat(Object(v.a)(e.logs))});default:return y}}));"undefined"!==typeof h&&h&&h===Object(h)&&Object.isExtensible(h)&&Object.defineProperty(h,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"store",filename:"example/store.ts"}});n("./example/index.css"),n("./node_modules/_antd@3.26.6@antd/dist/antd.css");function x(){var e=j((function(e){return e.count})),t=p(),n=Object(r.useCallback)((function(){return t({type:"add"})}),[]);return t({type:"log",payload:"\u8ba1\u6570\u5668\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\ud83d\ude80"}),c.a.createElement(l.a,{hoverable:!0,style:{marginBottom:24}},c.a.createElement("h1",null,"\u8ba1\u6570\u5668"),c.a.createElement("div",{className:"chunk"},c.a.createElement("div",{className:"chunk"},"store\u4e2d\u7684count\u73b0\u5728\u662f ",e),c.a.createElement(i.a,{onClick:n},"add")))}function _(){var e=j((function(e){return e.message})),t=p(),n=Object(r.useState)(""),a=Object(s.a)(n,2),o=a[0],i=a[1];t({type:"log",payload:"\u804a\u5929\u5ba4\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\ud83d\udc90"});return c.a.createElement(l.a,{hoverable:!0,style:{marginBottom:24}},c.a.createElement("h1",null,"\u804a\u5929\u5ba4"),"\u5f53\u524d\u6d88\u606f\u662f: ",e,c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({type:"chat",payload:o})}},c.a.createElement(u.a,{onChange:function(e){return i(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u6d88\u606f"})))}function E(){var e=j((function(e){return e.logs}));return c.a.createElement(l.a,{hoverable:!0},c.a.createElement("h1",null,"\u63a7\u5236\u53f0"),c.a.createElement("div",{className:"logs"},e.map((function(e,t){return c.a.createElement("p",{className:"log",key:t},e)}))))}var S=function(){var e=Object(r.useState)(!0),t=Object(s.a)(e,2);t[0],t[1];return c.a.createElement(b,{store:h},c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"count"},c.a.createElement(x,null)),c.a.createElement("div",{className:"chat"},c.a.createElement(_,null))),c.a.createElement("div",{className:"right"},c.a.createElement(E,null))))};n.d(t,"default",(function(){return N}));var C={};function N(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object.assign({},C,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),Object(o.b)("h3",{id:"\u5b9e\u73b0\u7684\u6838\u5fc3api"},"\u5b9e\u73b0\u7684\u6838\u5fc3api"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("inlineCode",{parentName:"li"},"Provider")," \u5728\u5e94\u7528\u7684\u6700\u5916\u5c42\u5305\u88f9\uff0c\u7528\u6765\u628aredux\u7684store\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\u3002"),Object(o.b)("li",{parentName:"ol"},Object(o.b)("inlineCode",{parentName:"li"},"useSelector")," \u7528\u6765\u5728\u9875\u9762\u4e2d\u8ba2\u9605store\u4e2d\u7684\u72b6\u6001\u3002"),Object(o.b)("li",{parentName:"ol"},Object(o.b)("inlineCode",{parentName:"li"},"useDispatch")," \u7528\u6765\u62ff\u5230redux\u7684dispatch\u65b9\u6cd5\u3002")),Object(o.b)("h3",{id:"redux-store\u7684\u5b9a\u4e49"},"redux store\u7684\u5b9a\u4e49"),Object(o.b)("pre",null,Object(o.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"import { createStore } from 'redux';\n\ntype AddAction = {\n  type: 'add';\n};\n\ntype ChatAction = {\n  type: 'chat';\n  payload: string;\n};\n\ntype LogAction = {\n  type: 'log';\n  payload: string;\n};\n\nconst initState = {\n  count: 0,\n  message: 'Hello',\n  logs: [] as string[],\n};\n\nexport type ActionType = AddAction | ChatAction | LogAction;\nexport type State = typeof initState;\n\nfunction reducer(state: State, action: ActionType): State {\n  switch (action.type) {\n    case 'add':\n      return {\n        ...state,\n        count: state.count + 1,\n      };\n    case 'chat':\n      return {\n        ...state,\n        message: action.payload,\n      };\n    case 'log':\n      return {\n        ...state,\n        logs: [action.payload, ...state.logs],\n      };\n    default:\n      return initState;\n  }\n}\n\nexport const store = createStore(reducer);\n")),Object(o.b)("h3",{id:"\u9875\u9762\u7ec4\u4ef6\u7684\u7f16\u5199"},"\u9875\u9762\u7ec4\u4ef6\u7684\u7f16\u5199"),Object(o.b)("pre",null,Object(o.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"import React, { useState, useCallback } from 'react';\nimport { Card, Button, Input } from 'antd';\nimport { Provider, useSelector, useDispatch } from '../dist';\nimport { store, State, ActionType } from './store';\nimport './index.css';\nimport 'antd/dist/antd.css';\n\nfunction Count() {\n  const count = useSelector((state: State) => state.count);\n  const dispatch = useDispatch<ActionType>();\n  // \u540c\u6b65\u7684add\n  const add = useCallback(() => dispatch({ type: 'add' }), []);\n\n  dispatch({\n    type: 'log',\n    payload: '\u8ba1\u6570\u5668\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\ud83d\ude80',\n  });\n  return (\n    <Card hoverable style={{ marginBottom: 24 }}>\n      <h1>\u8ba1\u6570\u5668</h1>\n      <div className=\"chunk\">\n        <div className=\"chunk\">store\u4e2d\u7684count\u73b0\u5728\u662f {count}</div>\n        <Button onClick={add}>add</Button>\n      </div>\n    </Card>\n  );\n}\n\nfunction Chat() {\n  const message = useSelector((state: State) => state.message);\n  const dispatch = useDispatch<ActionType>();\n  const [value, setValue] = useState('');\n\n  dispatch({\n    type: 'log',\n    payload: '\u804a\u5929\u5ba4\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\ud83d\udc90',\n  });\n  const onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    dispatch({\n      type: 'chat',\n      payload: value,\n    });\n  };\n\n  return (\n    <Card hoverable style={{ marginBottom: 24 }}>\n      <h1>\u804a\u5929\u5ba4</h1>\n      \u5f53\u524d\u6d88\u606f\u662f: {message}\n      <form onSubmit={onSubmit}>\n        <Input onChange={e => setValue(e.target.value)} placeholder=\"\u8bf7\u8f93\u5165\u6d88\u606f\" />\n      </form>\n    </Card>\n  );\n}\n\nfunction Logger() {\n  const logs = useSelector((state: State) => state.logs);\n\n  return (\n    <Card hoverable>\n      <h1>\u63a7\u5236\u53f0</h1>\n      <div className=\"logs\">\n        {logs.map(log => (\n          <p className=\"log\">{log}</p>\n        ))}\n      </div>\n    </Card>\n  );\n}\n\nexport default () => {\n  return (\n    <Provider store={store}>\n      <div className=\"flex\">\n        <div className=\"left\">\n          <div className=\"count\">\n            <Count />\n          </div>\n          <div className=\"chat\">\n            <Chat />\n          </div>\n        </div>\n        <div className=\"right\">\n          <Logger />\n        </div>\n      </div>\n    </Provider>\n  );\n};\n")),Object(o.b)(S,{mdxType:"Counter"},"Hi"))}N&&N===Object(N)&&Object.isExtensible(N)&&Object.defineProperty(N,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"example/index.mdx"}}),N.isMDXComponent=!0}}]);